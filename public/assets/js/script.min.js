"use strict";const mediaQuery=window.matchMedia("(min-width: 768px)"),splash=document.querySelector("#splash"),splashText=document.querySelector("#splash__text"),space=document.querySelector("#space");var centerX,centerY,star,i,bar=new ProgressBar.Line(splash__text,{easing:"easeInOut",duration:2e3,strokeWidth:6,color:"#fffdf7",trailWidth:3,trailColor:"#3e3e3e",svgStyle:{width:"80%"},text:{style:{position:"absolute",left:"50%",top:"50%",padding:"0",margin:"-50px 0 0 0",transform:"translate(-50%, -50%)","font-size":"1.5rem",color:"#fffdf7",font:"Bruno Ace"},autoStyleContainer:!1},step:function(e,t){t.setText(Math.round(100*t.value())+"%")}}),canvas=(bar.text.style.fontFamily='"Bruno Ace", Helvetica, sans-serif',bar.animate(1,function(){const e={opacity:[1,0]};splashText.animate(e,100).finished.then(()=>{splashText.style.display="none"}),window.warp=1==window.warp?0:1,executeFrame(),setTimeout(()=>{splash.animate(e,300).finished.then(()=>{splash.style.display="none"})},1500),setTimeout(()=>{stroke.play()},3e3)}),window.requestAnimFrame=window.requestAnimationFrame,document.getElementById("space")),c=canvas.getContext("2d"),numStars=1900,radius="0."+Math.floor(9*Math.random())+1,focalLength=2*canvas.width,warp=0,stars=[],animate=!0;function executeFrame(){animate&&requestAnimFrame(executeFrame),moveStars(),drawStars()}function initializeStars(){for(centerX=canvas.width/2,centerY=canvas.height/2,stars=[],i=0;i<numStars;i++)star={x:Math.random()*canvas.width,y:Math.random()*canvas.height,z:Math.random()*canvas.width,o:"0."+Math.floor(99*Math.random())+1},stars.push(star)}function moveStars(){for(i=0;i<numStars;i++)(star=stars[i]).z--,star.z<=0&&(star.z=canvas.width)}function drawStars(){var e,t,a;for(canvas.width==window.innerWidth&&canvas.width==window.innerWidth||(canvas.width=window.innerWidth,canvas.height=window.innerHeight,initializeStars()),0==warp&&(c.fillStyle="rgba(0,10,20,1)",c.fillRect(0,0,canvas.width,canvas.height)),c.fillStyle="rgba(209, 255, 255, "+radius+")",i=0;i<numStars;i++)e=((star=stars[i]).x-centerX)*(focalLength/star.z),e+=centerX,t=(star.y-centerY)*(focalLength/star.z),t+=centerY,a=focalLength/star.z*1,c.fillRect(e,t,a,a),c.fillStyle="rgba(209, 255, 255, "+star.o+")"}initializeStars(),executeFrame();const params__snow={particles:{number:{value:500,density:{enable:!0,value_area:800}},color:{value:["#000000","#808080","#C0C0C0","#FFFFFF","#0000FF","#000080","#008080","#008000","#00FF00","#00FFFF","#FFFF00","#FF0000","#FF00FF","#808000","#800080","#800000"]},shape:{type:"polygon",stroke:{width:0,color:["#000000","#808080","#C0C0C0","#FFFFFF","#0000FF","#000080","#008080","#008000","#00FF00","#00FFFF","#FFFF00","#FF0000","#FF00FF","#808000","#800080","#800000"]}},opacity:{value:1,random:!0,anim:{enable:!0,speed:3,opacity_min:0,sync:!1}},size:{value:1,random:!0,anim:{enable:!1,speed:20,size_min:.1,sync:!1}},line_linked:{enable:!1},move:{enable:!0,speed:1,direction:"none",random:!0,straight:!0,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:600}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1},onclick:{enable:!1},resize:!0}},retina_detect:!0},hamburger=(particlesJS("particles-js",params__snow),particlesJS("drawer-background",params__snow),$(".hamburger__menu")),headerNav=$(".header__nav"),scrollDown=(hamburger.on("click",function(){return headerNav.hasClass("is-open")?($("body").css("overflowY","visible"),$(this).attr("aria-expanded","false")):($("body").css("overflowY","hidden"),$(this).attr("aria-expanded","true")),$(".drawer-background, .hamburger__icon, .header__nav, #nav__list").toggleClass("is-open"),!1}),headerNav.on("click",function(){return headerNav.hasClass("is-open")&&($(".drawer-background, .hamburger__icon, .header__nav, #nav__list").removeClass("is-open"),$("body").css("overflowY","visible"),hamburger.attr("aria-expanded","false")),!1}),document.querySelector(".scrolldown")),fadeInKeyframes={opacity:[0,1]},fadeOutKeyframes={opacity:[1,0]},headerNavs=(setTimeout(()=>{scrollDown.style.display="block",scrollDown.animate(fadeInKeyframes,500)},5e3),document.querySelectorAll(".nav__link")),fadeInContents=(headerNavs.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();e=e.target.hash;document.querySelector(e).scrollIntoView({behavior:"smooth"})})}),document.querySelectorAll(".js-fadeIn")),fadeInOptions={root:null,rootMargin:"0px",threshold:0},fadeInCallback=(e,t)=>{e.forEach(e=>{e.target.style.opacity=0,e.isIntersecting&&(e.target.animate({opacity:[0,1],translate:["0 4rem",0]},{duration:1e3,easing:"ease",fill:"forwards"}),t.unobserve(e.target))})},fadeInObserver=new IntersectionObserver(fadeInCallback,fadeInOptions),pageTop=(fadeInContents.forEach(e=>{fadeInObserver.observe(e)}),document.querySelector("#page-top")),pageTopIcon=pageTop.querySelector("i"),pageTopArea=document.querySelector("#top"),pageTopOptions={root:null,rootMargin:"0px",threshold:.5},pageTopShow=e=>{e[0].isIntersecting||mediaQuery.matches?pageTop.animate(fadeOutKeyframes,500).finished.then(()=>{pageTop.style.display="none"}):(pageTop.style.display="block",pageTop.animate(fadeInKeyframes,500))},pageTopObserver=new IntersectionObserver(pageTopShow,pageTopOptions),lightSabers=(pageTopObserver.observe(pageTopArea),pageTopIcon.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),document.querySelectorAll(".lightsaber input")),lightSaberOptions={root:null,rootMargin:"-10% 0px -10% 0px",threshold:0},lightSaberCallback=e=>{e.forEach(e=>{e.isIntersecting?setTimeout(()=>{e.target.checked=!0},1e3):e.target.checked=!1})},lightSaberObserver=new IntersectionObserver(lightSaberCallback,lightSaberOptions),aboutButtons=(lightSabers.forEach(e=>{lightSaberObserver.observe(e)}),document.querySelectorAll(".about__tab"));aboutButtons[0].style.boxShadow="0 0 10px #76c1ec",aboutButtons[0].style.filter="grayscale(0%)",aboutButtons.forEach((s,n)=>{s.addEventListener("click",()=>{let e=s.querySelector(".about__img").getAttribute("data-image"),t=document.getElementById("big-img");var a=t.getAttribute("src");let r=document.getElementById("about__big-img").querySelectorAll("dl");aboutButtons.forEach(e=>{e.removeAttribute("style")}),s.style.boxShadow="0 0 10px #76c1ec",s.style.filter="grayscale(0%)",a!==e&&(r.forEach(function(e,t){e.style.display="none"}),t.animate([{offset:0,opacity:1},{offset:.5,opacity:0},{offset:1,opacity:1}],{duration:2e3,easing:"ease",fill:"forwards"}),t.animate([{transform:"rotateX(0deg)"},{transform:"rotateX(360deg)"}],{duration:1100,easing:"ease",fill:"forwards"}),setTimeout(function(){t.setAttribute("src",""+e)},600),setTimeout(function(){r[n].style.display="block"},1200))})});let header=$(".header"),speed=700,required=(MicroModal.init({disableScroll:!0,awaitOpenAnimation:!0,awaitCloseAnimation:!0}),$(".service__link").on("click",function(){return header.stop(!0).animate({top:"-60px"},speed/3),!1}),$(".modal__overlay, .modal__container .modal__close").on("click",function(){header.stop(!0).animate({top:"0"},speed/3)}),$(window).keyup(function(e){return 27==e.keyCode&&header.stop(!0).animate({top:"0"},speed/3),!1}),document.querySelectorAll(".contact__required")),input=document.querySelectorAll("#js-form input, #js-form textarea"),inputMessage=document.querySelectorAll(".contact__input");function checkText(e){switch(e){case 0:return 2<=input[0].value.trim().length?(input[0].classList.remove("is-error"),inputMessage[0].classList.remove("is-error"),input[0].classList.add("is-success"),!0):(input[0].classList.remove("is-success"),input[0].classList.add("is-error"),inputMessage[0].classList.add("is-error"),!1);case 1:return input[1].value.match(/[!#-9A-~]+@+[a-z0-9]+.+[^.]$/i)?(input[1].classList.remove("is-error"),inputMessage[1].classList.remove("is-error"),input[1].classList.add("is-success"),!0):(input[1].classList.remove("is-success"),input[1].classList.add("is-error"),inputMessage[1].classList.add("is-error"),!1);case 2:return 10<=input[2].value.trim().length?(input[2].classList.remove("is-error"),inputMessage[2].classList.remove("is-error"),input[2].classList.add("is-success"),!0):(input[2].classList.remove("is-success"),input[2].classList.add("is-error"),inputMessage[2].classList.add("is-error"),!1)}}input.forEach(function(e,t){e.addEventListener("blur",function(){checkText(t),""!==e.value&&!0===checkText(t)?(required[t].animate([{transform:"rotateY(0deg)"},{transform:"rotateY(360deg)"}],{duration:1e3,easing:"ease",fill:"forwards"}),setTimeout(function(){required[t].textContent="OK!!",required[t].style.borderColor="#7fff7d"},550)):(required[t].animate([{transform:"rotateY(360deg)"},{transform:"rotateY(0deg)"}],{duration:1e3,easing:"ease",fill:"forwards"}),setTimeout(function(){required[t].textContent="必須!",required[t].style.borderColor="#ff7a7a"},550))})});let submit=document.getElementById("contact__submit"),submitBtn=document.getElementById("js-submit"),contactForm=document.getElementById("js-form"),$form=(contactForm.addEventListener("change",function(){""!==input[0].value&&!0===checkText(0)&&""!==input[1].value&&!0===checkText(1)&&""!==input[2].value&&!0===checkText(2)?(submit.classList.remove("is-disabled"),submitBtn.disabled=!1):(submit.classList.add("is-disabled"),submitBtn.disabled=!0)}),$("#js-form")),success=$("#js-success"),error=$("#js-error");$form.on("submit",function(){return $.ajax({url:$form.attr("action"),data:$form.serialize(),type:"POST",dataType:"xml",statusCode:{0:function(){$form.fadeOut(500),success.fadeIn(2e3)},200:function(){$form.fadeOut(500),error.fadeIn(2e3)}}}),!1});